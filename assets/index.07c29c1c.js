import{p as e,a as s,r as t,b as a,o as i,c as n,w as c,v as l,u as r,d,F as p,e as o,f as u,t as k,g as m}from"./vendor.296dddb6.js";const h=u();e("data-v-8f432a8e");const C={class:"print"},b={class:"toolbar"},f={class:"tool"},v={class:"file-btn btn btn-success"},g=d("label",{class:"file-btn-label",for:"ipt_file"},"上传图片文件夹",-1),y={class:"tool"},w={class:"pics"},R={class:"pic-name"};s();const L={expose:[],setup(e){const s=t({picture:[],curChecked:[],printed:[],printing:!1}),u=e=>{s.curChecked.length>2?alert("打印项目不能超过2个"):(s.printing=!0,setTimeout((()=>{window.print(),s.printing=!1;let e=s.curChecked.map((e=>e.name));s.printed.push(...e),s.curChecked=[]}),500))},m=async e=>{const t=[...e.target.files],a=[];for(const s of t){const e=await L(s);a.push(e)}s.picture=a},L=async e=>{const{name:s,size:t,type:a,webkitRelativePath:i}=e;return new Promise(((n,c)=>{var l=new FileReader;l.readAsDataURL(e),l.addEventListener("load",(()=>{const e=l.result;n({dataURL:e,name:s,size:t,type:a,webkitRelativePath:i,isChecked:!1})}),!1)}))};return(e,t)=>{const L=a("page");return i(),n(p,null,[c(d(L,{size:"A4"},{default:h((()=>[d("div",C,[(i(!0),n(p,null,o(r(s).curChecked,(e=>(i(),n("div",{key:e.name,class:"print-item"},[d("img",{class:"print-pic",src:e.dataURL},null,8,["src"])])))),128))])])),_:1},512),[[l,r(s).printing]]),c(d("div",null,[d("div",b,[d("div",f,[d("button",v,[g,d("input",{id:"ipt_file",class:"input-file",type:"file",onChange:m,multiple:"",webkitdirectory:""},null,32)])]),d("ol",y,[(i(!0),n(p,null,o(r(s).curChecked,(e=>(i(),n("li",{key:e},k(e.name),1)))),128))]),d("div",{class:"tool"},[d("button",{onClick:u,class:"btn btn-primary"},"打印")])]),d("div",w,[(i(!0),n(p,null,o(r(s).picture,(e=>(i(),n("div",{class:["pic-box",{checked:e.isChecked}],onClick:t=>(e=>{if(e.isChecked=!e.isChecked,e.isChecked)s.curChecked.push(e);else{let t=s.curChecked.findIndex((s=>s.name===e.name));t>-1&&s.curChecked.splice(t,1)}})(e),key:e.name},[d("img",{class:"pic",src:e.dataURL},null,8,["src"]),d("p",R,k(e.name),1),d("div",{class:{mask:r(s).printed.includes(e.name)}},null,2)],10,["onClick"])))),128))])],512),[[l,!r(s).printing]])],64)}},__scopeId:"data-v-8f432a8e"};m({expose:[],setup:e=>(e,s)=>(i(),n(L))}).mount("#app");
